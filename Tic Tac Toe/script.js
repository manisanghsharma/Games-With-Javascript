const boxes = document.getElementsByClassName("box");
const resetBtn = document.getElementById("reset");
const heading = document.getElementById("title");

let winSeq = ['123','456','789','147','258','369','159','357','1234','1235','1236','1237','1238','1239','1456','2456','3456','4567','4568','4569','1789','2789','3789','4789','5789','6789','1247','1347','1457','1467','1478','1479','1258','2358','2458','2568','2578','2589','1369','2369','3469','3569','3679','3689','1259','1359','1459','1569','1579','1589','1357','2357','3457','3567','3578','3579','12345','12346','12347','12348','12349','12345','12356','12357','12358','12359','12346','12356','12367','12368','12369','12347','12357','12367','12378','12379','12348','12358','12368','12378','12389','12349','12359','12369','12379','12389','12456','13456','14567','14568','14569','12456','23456','24567','24568','24569','13456','23456','34567','34568','34569','14567','24567','34567','45678','45679','14568','24568','34568','45678','45689','14569','24569','34569','45679','45689','12789','13789','14789','15789','16789','12789','23789','24789','25789','26789','13789','23789','34789','35789','36789','14789','24789','34789','45789','46789','15789','25789','35789','45789','56789','16789','26789','36789','46789','56789','12347','12457','12467','12478','12479','12347','13457','13467','13478','13479','12457','13457','14567','14578','14579','12467','13467','14567','14678','14679','12478','13478','14578','14678','14789','12479','13479','14579','14679','14789','12358','12458','12568','12578','12589','12358','23458','23568','23578','23589','12458','23458','24568','24578','24589','12568','23568','24568','25678','25689','12578','23578','24578','25678','25789','12589','23589','24589','25689','25789','12369','13469','13569','13679','13689','12369','23469','23569','23679','23689','13469','23469','34569','34679','34689','13569','23569','34569','35679','35689','13679','23679','34679','35679','36789','13689','23689','34689','35689','36789','12359','12459','12569','12579','12589','12359','13459','13569','13579','13589','12459','13459','14569','14579','14589','12569','13569','14569','15679','15689','12579','13579','14579','15679','15789','12589','13589','14589','15689','15789','12357','13457','13567','13578','13579','12357','23457','23567','23578','23579','13457','23457','34567','34578','34579','13567','23567','34567','35678','35679','13578','23578','34578','35678','35789','13579','23579','34579','35679','35789']
  
let c = 1;
let draw = 1;
let newSeq = "";
let cross = [];
let circle = [];

for(box of boxes){
    box.addEventListener("click", updateBox);
}

function updateBox(){

    let i, currentBoxNo;

    for(i=1; i<=9; i++){
        if(this.classList.contains(i)){
            currentBoxNo = i;
            break;
        }
    }

    if(c%2==1){
        let img = document.createElement("i");
        img.classList.add('bx','bx-x');
        this.appendChild(img);
        cross.push(currentBoxNo);
        cross.sort();
    }

    else{
        let img = document.createElement("i");
        img.classList.add('bx','bx-circle');
        this.appendChild(img);
        circle.push(currentBoxNo);
        circle.sort();
    }

    if(c>=9 && draw === 1){
        heading.innerHTML = "Game Drawn!";
    }

    checkWinner();

    c++;
    this.removeEventListener("click", updateBox);
}

function reset(){
    for(box of boxes){
        box.innerHTML = ""; 
        box.addEventListener("click", updateBox);
        heading.innerHTML = 'Tic Tac Toe With<img src="https://upload.wikimedia.org/wikipedia/commons/3/3b/Javascript_Logo.png" id="js">'
    }
    c=1;
    draw=1;
    cross = [];
    circle = [];
}

function checkWinner(){
    if(c%2==1){
        newSeq = cross.toString().replaceAll(',','');
        console.log(newSeq + "   " + 'X' + "  " + c);
        winSeq.forEach((n) => {
            if(newSeq.includes(n)){
                draw = 0;
                heading.innerHTML = '<i class="bx bx-x" id="win"></i> Wins!';
                for(box of boxes){
                    box.removeEventListener("click", updateBox);
                }
            }
        });
    }
    else{
        newSeq = circle.toString().replaceAll(',','');
        console.log(newSeq + "   " + 'O' + "   " + c);
        winSeq.forEach((n) => {
            if(newSeq.includes(n)){
                draw = 0;
                heading.innerHTML = '<i class="bx bx-circle" id="win2"></i>  Wins!';
                for(box of boxes){
                    box.removeEventListener("click", updateBox);
                }
            }
        });
    }


    
}
